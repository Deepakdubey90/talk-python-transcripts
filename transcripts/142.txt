00:00:00 Michael Kennedy: Is there some task you find yourself performing frequently, repetitively, on the web? With Python and modern tooling, virtually every web site and every web application has become easily scriptable. I'm not talking about web scraping. I'm referring to Selenium, which is a headless Python front end for the full version of the Chrome browser. Join me and Tim Grossman as we talk about Selenium and how to automate the web. You'll learn about his project InstaPy, which is a full Python package for automating almost anything involving Instagram. This is Talk Python to Me, Episode 142, recorded December 5th, 2017. Welcome to Talk Python to Me, a weekly podcast on Python: The Language, The Libraries, The Ecosystem, and the Personalities. This is your host, Michael Kennedy. Follow me on Twitter where I'm @mkennedy. Keep up with the show and listen to past episodes at TalkPython.fm, and follow the show on Twitter via @talkpython. This episode's brought to you by Linode and GoCD. Be sure to check out what they're offering during their segments, it really helps support the show. Tim, welcome to Talk Python.
 
00:01:16 Tim Grossmann: Hey, thanks for having me.
 
00:01:17 Michael Kennedy: It's great to have you here. You have a pretty cool project and it's really leveraging some technology that I haven't done that much with, with Selenium, and we're going to talk about basically automating web sites with Selenium and then your package, which packages it all up, into automating Instagram and InstaPy which is really, really fun. So I'm looking forward to talking about this sort of getting the web data where there is no API or where you don't want to use the API.
 
00:01:44 Tim Grossmann: Yeah well I'm excited as well to talk about InstaPy and how I did it and kind of the underlying technology.
 
00:01:50 Michael Kennedy: It'll be really fun. So before we get into that, though, let's hear your story. How'd you get into programming and into Python?
 
00:01:57 Tim Grossmann: Well at least for me, these are kind of two different starting points because I got into programming while doing my bachelor's degree in arts, and my bachelor's thesis was about automating repetitive processes when it comes to using 3D art and animation tools. And that was kind of the starting point where I started to be interested in writing scripts and doing automation and writing code.
 
00:02:22 Michael Kennedy: Was this things like the Adobe tools, like Photoshop and some of the other ones? I know a lot of the 3D animation software has automation pipelines that you can plug into.
 
00:02:34 Tim Grossmann: There was this, or there is this one tool called ZBrush, and film, advertisement and games use it to create high-detailed models of, for example, characters or any kind of organic stuff. And they have this internal scripting language called ZScript, and with that you can easily create GUI applications that help you, for example, color different layers in different styles easily. You will do that by yourself and it will take a lot of time but if you have a script that does it for you, and you have a nice GUI that you can use to color everything the way you want to, it saves you a lot of time in the long run.
 
00:03:12 Michael Kennedy: Yeah that sounds really cool. So that got you into programming and this funky language called ZScript which I've never heard of. What was it like?
 
00:03:20 Tim Grossmann: Really interesting. When you first start out with such a thing and it's the first language you get into, it's kind of hard and it actually was a programming language or a scripting language more like, where there wasn't a lot of documentation. So it was a pretty niche language and it was kind of hard to get in and kind of hard to keep track of. But once you get down the foundations it's really awesome and it's really interesting to build stuff with it. Because there's a huge community behind ZBrush who are all just artists, but if you're into scripting as well you can create tools that not only help you get your work flow improved but also help a lot of other people.
 
00:04:03 Michael Kennedy: Yeah, that's really cool. It's really nice that there's that community. It's probably not quite the same as being able to go to Stack Overflow and look how to like do some like double loop list comprehension thing really quickly, right? The resources are a little thinner I would guess but still, very cool. All right so one of the areas that I know in this whole space that has a lot of Python is Blender and the 3D stuff that they got going on there, that's pretty interesting, so how did you go from ZScript into Python?
 
00:04:32 Tim Grossmann: Python was actually introduced pretty late in my studies, so after finishing my bachelor's degree in arts, I kind of was really interested in getting into programming and so I started another bachelor's degree which is computer science right now and I'm still studying it. And quite a half a year to a year ago, we had this lecture called data mining and as most of the Python users probably know it, that Python is one of the most-used languages for data analytics, data science, and all these data-wrangling kind of tasks where you use Pandas and TensorFlow, depending on what you do. So I had to prepare for this lecture a little bit because I did not want to go in there without having any kind of knowledge in Python. And so I really got introduced, or I introduced myself, into this Python field, I had learned Java before and Javascript so I kind of knew a little bit about the basics and the foundations, so it was not too hard to get into it and a lot of people probably know, or all the listeners probably know that Python is just a really nice language that looks like it's written how you would do it initially. So it's kind of like you say it, you can sometimes write it down, and it's pretty easy to get into.
 
00:05:48 Michael Kennedy: Yeah, it's really lovely in that way. There's a great cartoon that was going around a meme, I don't know where it was on, Instagram maybe, maybe on Twitter. It was a picture of these people standing around some description on paper and it said, "Pseudocode." And it said, "We need to convert this pseudocode into Python." And so then the next picture in the cartoon is, they just put .py on the end of the pseudocode. It's kind of like that, this is the way you would naturally describe it and then oh yeah, that's actually how it works, just run that.
 
00:06:20 Tim Grossmann: Absolutely yeah.
 
00:06:21 Michael Kennedy: Very cool, all right so you said that you got your degree in arts and now you're working on a computer science and actually you come from Stutgart where a lot of listeners know, I spent some time there as well but neither of us are in Stutgart right now, we're both on the West Coast of the US so you're actually doing something pretty exciting as a little time away from your studies or applied studies.
 
00:06:45 Tim Grossmann: Yes exactly, I'm currently sitting in the heart of Silicon Valley and it was one of my biggest goals while studying, to get involved in this area and get maybe an internship in the Silicon Valley area right now I'm sitting in Palo Alto where I'm doing an internship at Bosch in the field of data engineering which is kind of a subfield of data science and this big data field where a lot of people are currently working on.
 
00:07:13 Michael Kennedy: That's really cool, Bosch is one of those companies that seem to do a little bit of everything. I think of them as automotive parts, but it's also so many other types of things. What kind of stuff are you doing at your internship?
 
00:07:25 Tim Grossmann: We have a lot of data, so we have these manufacturing lines and these manufacturing lines they produce a ton of data for different components, so we want to have this real time stream of data and we kind of operate on them, we transform it, we clean it up, we normalize it to make sure that the data scientists later in the pipeline have an easy task in operating on them and creating models out of it, creating drafts out of it, getting some better insights in general.
 
00:07:56 Michael Kennedy: That's really cool, I've never been really a data scientist, I've been more the programmer side of things but I hear from the data scientists that I know that a major part of the job is actually data acquisition, normalization, cleanup, you probably use Pandas and all those kind of things a lot over there right?
 
00:08:12 Tim Grossmann: Since I'm more into data engineering and less into data science itself, I'm mostly doing Python in my free time for some private projects and at Bosch, we mostly use for example Scala and Kafka, we use Spark and there is also, we could use Spark for Python because there is PySpark but we all do it on the JVM and therefore we use Scala.
 
00:08:36 Michael Kennedy: Yeah that's cool, Scala sounds like an interesting thing. I know there was Jython as one of the options for running Python in the JVM but I kind of feel like Jython hasn't gotten a lot of attention the last many years. Do you guys think about Jython at all?
 
00:08:51 Tim Grossmann: That's really interesting because right now I'm working on a project as well, it's also at Bosch, it's an evaluation of a third party tool and they have this small component, this Jython component and I wasn't really sure what it is or what it was until I got used to it and then I had some pretty interesting tasks about datetime conversion and we had this weird datetime and it was really nice to use Java in combination with Python and combine the forces of their day time and date conversion libraries to create this really nice and well structured code that does exactly what we want to do so I think it's pretty cool to combine these and it runs pretty fast as well, so it's not too bad even though it's not that popular yet.
 
00:09:36 Michael Kennedy: Yeah that's awesome. I know there's some major, major companies right in the area where you are but I can't name their names because of how I learned about this, that use Jython as a major, major platform out there. So that's pretty interesting. I definitely think it makes sense, if you are already mostly doing Java as a company, or similarly if you are a Microsoft.net shop to use Python.net or Iron Python to be able to just go okay, well this part is better in Python and I know I can't fight the forces, it's trying to push back the ocean to say we're just going to rewrite it in Python, so let's just put them together like you said, that's cool.
 
00:10:12 Tim Grossmann: Totally yeah, it was a real nice experience playing around with this Jython code and seeing what they can do.
 
00:10:19 Michael Kennedy: Yeah for sure. Let's talk a little bit about the Instagram stuff that you've been up to and like we said at the beginning, we'll focus on some of the foundations as well. What are the origins of this? It feels to me like it came from, you're going to help some companies basically automate their social media story and there are automations out there like I use Buffer for the podcast and I can schedule a social media message to go out to LinkedIn, Twitter, Facebook at any time, all sorts of stuff, but we're talking go in and comment on this post. Go and like this photo. Go reshare this, those kind of things right?
 
00:10:59 Tim Grossmann: Yeah exactly, the tool I built has a lot of these features you already described right now and it's really for people who know some of the pages that are out there, these services that offer you to just pay three bucks, pay five bucks to get 100, 200 followers right away. It's really not comparable to that kind of automation if you would name it like that. It's more in the term of all right I have my account and my account is about cars, my account is about cats, and so I want to interact with people that also have an account about cats or also used to post a lot of cat pictures and then the script or the bot, however you want to call it, goes to their account and for example likes one of their pictures or comments on one of their pictures and you can set that all up, you can say all right, I want to like but I don't want to comment, and then if you want to comment, you can set comments like all right this is a nice cat or this is a cute looking cat and you can also set up that you want to follow these people so that, and if you do that, they will see you as a person, you as a profile in their news page or their notifications page and they of course will check out your account as well because this is how the whole Instagram social networking thing works nowadays. That will make them attracted to your page and maybe if they see that you post similar stuff to them, they will just follow you or like your stuff and comment on your stuff naturally because they really don't know that it's a bot or it's kind of automation behind it.
 
00:12:38 Michael Kennedy: That's for sure. I feel like there are these services that you can go out there and get social media followers or whatever and they've always seemed so empty and shallow to me. It seems like the real way to get meaningful people to care what you say and interact with you is to interact with them, right? It's just human nature.
 
00:12:59 Tim Grossmann: Absolutely yeah.
 
00:13:00 Michael Kennedy: I notice these people all the time using these scripts to go and follow the podcast or follow me personally and then three days later, they'll unfollow because I didn't follow them back or something like that, I'm like just because you followed me that's not going to do it, hint to everyone listening, if you want me to follow you, I follow almost everyone that sends me a direct message or mentions me, any form of real interaction, I follow that person. But just because somebody comes along and follows me, what's the chance it's just going to go away again in three days, so I think these real interactions are important. You've talked about, you actually gave a talk at EuroPython.
 
00:13:42 Tim Grossmann: Yeah it was exactly about this topic, it was not only about this InstaPy, this tool I built, but more general about how you can use Python and Selenium which is just a front end testing library, how you can use these in combination to create automations yourself for example for Instagram if you want to do that.
 
00:14:02 Michael Kennedy: Yeah that's cool. One of the little stories you shared in there which totally resonated with me with other jobs that I had, not around social media, but there were people whose job was to go around, log into the client's accounts, find interesting or related social media accounts and interact with them a little bit and then go away. Their job was just to be that active person for hundreds of accounts right?
 
00:14:25 Tim Grossmann: Yeah exactly, that's one thing I found out after I gave the talk and had some interactions with a few people that contacted me because of the project was that they told me that they have companies, they have businesses that do these kind of automations for customers but they have one or two people sitting there and these people, they come in at eight in the morning, they sit down at their desk and have a huge list of accounts with username and password and then they log into that account and all they do on that day is to go through these accounts, liking, commenting and following people on Instagram. I just thought that's just so ridiculous, because of course you can automate this kind of stuff and it's really hard to believe that there are companies that pay several people to do that. There could be for example, one guy that is working on it full time to automate this kind of stuff.
 
00:15:16 Michael Kennedy: Yeah, I worked at some companies where there was a lot of manual stuff, it was not a company full of programmers or a company full of scientists and they would do all these things manually and they literally had grad students and stuff who would just go through the data and do this repetitious stuff and like you know, we could just write software this week to do all of this and without errors and right away and they were totally terrified, they were like, you're going to get rid of our jobs. No, we're going to make it so you can actually do the jobs humans were meant to do and not have to do this junk. Then after a month, they were doing higher level, more interesting stuff and then another round of automation and then they were just doing more interesting things and I kind of feel like that could happen here, like those people who come in and sit down instead of just blindly following and liking stuff, they could actually be following up on the conversations triggered by the bots and stuff like that.
 
00:16:15 Tim Grossmann: Absolutely yeah.
 
00:16:16 Michael Kennedy: Yeah pretty interesting. This portion of Talk Python To Me is brought to you by Linode, are you looking for bulletproof hosting that's fast, simple and incredibly affordable? Look past that bookstore and check out Linode at talkpython.fm/linode, L-I-N-O-D-E. Plans start at just $5 a month for a dedicated server with a gig of ram. They have 10 data centers across the globe, so no matter where you are, there's a data center near you. Whether you want to run your Python web app, host a private get server or a file server, you'll get native SSDs on all machines, a newly upgraded 200GB network and 24/7 friendly support, even on holidays and a seven day money back guarantee. Want a dedicated server for free for the next four months? Use the coupon code Python17 at talkpython.fm/linode. All right so let's take a step back and let's talk the foundations, because I think the foundational stuff is actually really interesting for people regardless of whether they care about Instagram or not. Then we can talk about how that led to InstaPy. Really a lot of this is based upon Selenium right?
 
00:17:21 Tim Grossmann: Exactly, yeah.
 
00:17:22 Michael Kennedy: Tell everyone what Selenium is, we haven't talked about it too much on the podcast.
 
00:17:26 Tim Grossmann: For those who don't know, Selenium is actually a front end testing framework and what this means is you create a front end for your application, for example, it's just a simple webpage and then you use Selenium to create interaction, create assimilation, that just imitates the user clicking on different buttons, it imitates the user clicking on posts of people, commenting or just writing into a simple text box.
 
00:17:56 Michael Kennedy: Right, one of the things you can do is say, go to this text box and send this sequence of keys, I space like space this period. This is different from say Beautiful Soup or something where you just get the html, this actually has a headless Chrome, Chrome the browser and it runs that and then you interact with Chrome through Python right?
 
00:18:19 Tim Grossmann: Yeah exactly, so for example the first step is always to create a new browser instance and if you don't use Chrome Headless, it will just open up a new browser window as you would do it if you would do it manually and in there, then you can do these automation in terms of saying all right I want my mouse to be at this position and click that point in the graphic user interface.
 
00:18:41 Michael Kennedy: Yeah and you can actually watch it right?
 
00:18:43 Tim Grossmann: Yeah you can sit there and watch your automation doing the job for you actually.
 
00:18:48 Michael Kennedy: It's pretty awesome. I'm working look, I'm doing it. And it's pretty easy to install right?
 
00:18:55 Tim Grossmann: It's super easy because it's a simple Python package on PyPI and you can just do pip install selenium and you're ready to go.
 
00:19:03 Michael Kennedy: Yeah that's really awesome. The way to get started is you basically create an instance of Selenium, you tell it to use the headless Chrome and then you just set up a request right? And then start to interact with it.
 
00:19:16 Tim Grossmann: Exactly yes. Actually that is the full pipeline here.
 
00:19:20 Michael Kennedy: Nice, not too hard so it loads up and one of the things this is really important for is if you were to use screen scraping on any website that uses a modern Javascript front end framework, you might call them modern web, I'm not sure that's really the right term for it, but any Angular JS, View JS, these types of sites, what you're going to get back if you hit them with say request plus beautiful soup is a bunch of mustache curly braces where data would go if it were to run the java script right?
 
00:19:49 Tim Grossmann: That's one of the biggest problems when using, like you said, requests because this content is only rendered dynamically once you enter the page and if you just use requests, you will get back the skeleton of the page but not the skeleton filled with the actual content.
 
00:20:07 Michael Kennedy: Right, so this basically it's real Chrome, so it really runs all the stuff that's happening there but you have this really nice way to interact with it. So there's a couple of ways in which you might go find things in the page, like maybe let's take the example of logging in to Instagram through Selenium, so give us a bit of a description, maybe the first, like the XPath way and we'll talk about page object later.
 
00:20:28 Tim Grossmann: What you have to do to make it work is you kind of look into the page html of the webpage, so you just open up the document html and then you can look into it and you can for example, select one of the page elements. Let's say we are in the login page and we want to go into the username input box. We just look up the xpath in the xml, in the html and once we've found the input box, we can then use that identifier, for example you could use a combination of the element class which is for example the input field and the class itself or an ID to get a combined query which we can then use to uniquely identify this input box.
 
00:21:14 Michael Kennedy: Yeah that's really cool. What you actually get back is you get a Python object and then you can send it the keys and otherwise interact with it right? So you could say write the Xpath expression, define the username and send the keys, your username, find XPath expression for the password thing, get that object back, send it the keys, your password, and then you could actually go do the same thing for the login button and then you can call click, or other types of Java Script behaviors on it right?
 
00:21:46 Tim Grossmann: Kind of the way it works and it won't get any more hard.
 
00:21:50 Michael Kennedy: Yeah that's really really interesting. The other thing that I thought was pretty cool about it was action chains, do you want to tell us maybe about how action chains work?
 
00:21:58 Tim Grossmann: Action chains are kind of the same commands but you can chain them together so you only have one execution instead of several ones. For example let's take the example of just logging in a user. Before that you would have to write several commands to find the element, for example for the username and password and then send the keys there and click on the login button. If you use action chains, you can chain them together and put a execute command at the end which will then trigger the whole chain through execute after all which will also move your mouse cursor for example, this will create a more natural interaction than only using the simple commands.
 
00:22:43 Michael Kennedy: Yeah I don't know how much of a anti-automation detection these different sites use. I know some of them, even when you're doing basic screen scraping, they won't respond to you if they think you're, say your user agent is not something like Chrome or Firefox. If they see that as request on Python 3, they're like uh no, no thank you. The content is empty, but if you go and spoof the header for user agent, it's like oh yeah, here's the page, I love you, dear user, welcome. It sounds like this might also be a little bit of a good thing for that.
 
00:23:19 Tim Grossmann: Yeah exactly and especially a lot of the pages really do block you off in general, so they don't even give you an empty object, they will just maybe make sure that you won't get a response at all and it's really hard to get dynamically rendered content on some of the big pages because they have these agreements, these license agreements that especially state that you're not supposed to crawl the webpage and this kind of stuff.
 
00:23:46 Michael Kennedy: Sure, there's actually, long long ago I had sorry, I'm forgetting his name, I had the guy behind Scrapee on and he actually runs web scraping as a service at scrapinghub.com and it has like all these different servers and it has all this infrastructure for dealing with these types of things, always come from a different IP address and all sorts of stuff, but it's definitely a challenge to work with some of the sites, especially if they don't want you to. All right we've gone through this action chain, we've logged in and then on most of these social media sites certainly Instagram, Facebook and Twitter, they've deeply embraced the idea of the infinite scroll rather than some form of paging.
 
00:24:32 Tim Grossmann: Yeah this is, if you want to automate this kind of stuff, it's totally annoying.
 
00:24:37 Michael Kennedy: I'm sure, tell us what the problem is and how you might solve that with Selenium.
 
00:24:41 Tim Grossmann: If you check out for example the feeds page of your Instagram profile, you will see that there's only a few posts pre-fetched and all the other stuff will be fetched once you reach the end of the page. This is pretty good for the performance of your network because you only have to get all the data that is visible right now but if you do it with a query, then you have this paging style where you get eight posts per query and then you have to make sure you keep that paging object as well so you get more data and with Selenium, this is pretty easy since you're an automated user, you can just use a command to scroll down to the bottom of the page and scroll up again and once the new content is loaded, you do that over and over again. This will just trigger new content to be loaded all the time which will make sure that you have a really nice and large portion of the webpage visible.
 
00:25:40 Michael Kennedy: Yeah and it usually has that little loading gif, that spinning loading thing at the end, as it's loading up so can you detect that and wait for it to go away or do you just give it some time. Just go to the end and wait for five seconds and go okay, we probably have more, let's try again.
 
00:25:56 Tim Grossmann: What it's doing right now is it will scroll to the end of the page and then it will scroll up again and it will wait a few seconds before it will try again and if there is no more content, we will detect that and then we will try again, so it's more like a two way security that you will actually get new content. If you don't have any network, it will just stop doing it and then get the content that is already there.
 
00:26:22 Michael Kennedy: Okay another one of the problems that you talked about, I guess there's a couple problems, one is the obvious problem that if you're using XPath, it's super dependent on the structure of the html, it's even worse than CSS which already depends on the page structure, but it's like really the true structure and if it changes, that's really bad. Most people are like whoa, wonderful, Twitter redesigned their website and I can just imagine some people going oh no, we have to get right on this, you know, so that's one of the problems you run into right? The other one which this one I didn't actually think about but makes perfect sense for these global companies like Instagram and other social media is they can send you different languages and so if you're writing a query to say, go find the thing that says login and then you get German back, it's not going to say login usually right? Whatever it's going to say right?
 
00:27:23 Tim Grossmann: Yeah like you described all the time it was like oh no, they changed something again and for example with the language part, you can actually force Chrome to use a specific language so this was the first things we introduced to make sure that we don't have a big problem with the languages at all because searching a button for its text is pretty nice and they won't change the English text in a lot of cases because it's just default or steadily described and then we can set the language of the browser to English from the beginning and this will help us find elements that won't create that fact.
 
00:28:04 Michael Kennedy: Yeah that's cool, I definitely learned about the setting the preferred language in your browser when I moved to Germany so that was, very little German but I can't do all my web work in German it wasn't that good. All right so those are some of the problems. One thing that Selenium has that's pretty cool is something called the page object pattern that takes away a lot of those issues right?
 
00:28:26 Tim Grossmann: Yeah exactly.
 
00:28:27 Michael Kennedy: Tell us about the page object.
 
00:28:29 Tim Grossmann: Pattern is actually just another design pattern that was introduced by Selenium itself. In the page object pattern, you just assign each page a separate object so it's a little bit of an object oriented approach to this whole web automation thing and for example if we take the login page again and you build a page object pattern, you build a page object off that login page, then you will just focus on the important parts there for example, we again have the username field, we again have the password field, we have the login button and for example we have a dropdown for languages or the signup button. Then you will just assign each of the fields of that object will be XPathed to one of the elements on the page itself.
 
00:29:21 Michael Kennedy: Yeah that's cool but it knows okay, I've detected it in the html that way so it's not going to vary so much, you just have the end result that you're after like username or something. On this page object object, that's kind of meta, the things like text boxes and stuff those are the attributes and you can interact with them that way and what do the buttons become functions?
 
00:29:45 Tim Grossmann: You still have the buttons as fields there but you also create methods or functions for the buttons itself for example you will have a login function that just triggers the click on the login button itself, just so you have a really nice abstraction over the more complex structure which you can call really easily and therefore you will get a really nice API layer.
 
00:30:07 Michael Kennedy: That sounds really really nice. You solved so many problems, you solved the page structure changing, you solved having to worry about actually what the XPath queries are, you solved the language problem, it sounds really, really nice to have this page object. All right everything we've talked about so far is just Selenium and anybody who wants to automate basically anything on the web using Python, they could just leverage this right?
 
00:30:35 Tim Grossmann: Yeah absolutely.
 
00:30:36 Michael Kennedy: Cool, you took this and said all right, let's build a wrapper around or on top of this concept and really focusing on Instagram and you called it InstaPy right?
 
00:30:48 Tim Grossmann: Yeah InstaPy, it's kind of a, you probably have guessed it, it's a combination of Instagram and Python, so it's not too straightforward.
 
00:30:56 Michael Kennedy: It's a really great little phrase. Tell us what it is, how does it add value to this whole chain?
 
00:31:04 Tim Grossmann: InstaPy actually is just another layer on top of this whole abstraction we already have with Selenium and this page object pattern. With InstaPy you can build your own bot actually so you have different methods like for example, all right I want to like, I want to comment, I want to interact with the followers of a special page, I want to follow these people and now you can really set up and really define how the bot should act for you so it's not a one solution that fits for everyone, but you can really define it on your own and how you want it to work for yourself.
 
00:31:41 Michael Kennedy: That's really cool and has so many Instagram-focused things that you can do. Before we get into the details though, where'd it come from, why did you create this thing? Were you trying to beat your friends on Instagram and were like I am going to have more followers by the end of the week, I promise.
 
00:31:57 Tim Grossmann: Well the idea actually originated when I started learning Python and there's this great book called Automating the Boring Stuff from Al Sweigart.
 
00:32:06 Michael Kennedy: Yeah Al's great.
 
00:32:07 Tim Grossmann: That book is just awesome and there is one chapter about automating stuff with Selenium and he has this, in my opinion a little bit boring task of filling out the online form and it's really, it's a good example of what you can use Selenium for, but I thought it would be nice to have something more interesting, at least for me and so I started playing around with Instagram a little bit and I kind of realized that just liking random stuff worked out pretty cool.
 
00:32:36 Michael Kennedy: There was a journalist who, this was Facebook not Instagram who went and actually as an experiment liked everything that was on his Facebook feed, whether it was really left wing or right wing, offensive, funny, whatever he just liked everything and he said it destroyed his account after a week. I don't think Instagram is so contentious as somewhere like Facebook though.
 
00:32:59 Tim Grossmann: Yeah there's one similar problem, if you follow too many people, then your newsfeed, a lot of people just care about their newsfeed of posts that friends for example post and if you follow a lot of people and you reach the 10,000 people that is the cap for the amount of people you can follow, then your feed will get really messy and you won't find anything there and you probably have a lot of trash there.
 
00:33:24 Michael Kennedy: Yeah for sure, it's tough when you have too many people, you kind of lose your friends among all the folks you're trying to follow. This portion of Talk Python to Me was brought to you by GoCD, GoCD is an on premise open source continuous delivery tool to help you get better visibility into and control of your team's deployments. With GoCD's comprehensive pipeline modeling, you can model complex workflows for multiple teams with ease and GoCD's value stream map lets you track changes from commit to deploy at a glance. Say goodbye to deployment panic and hello to consistent, predictable deliveries. We all know that continuous integration is super important to the code quality of your applications. Choose the open source local CI server GoCD. Learn more at talkpython.fm/GoCD, that's talkpython.fm/GOCD. There's a couple things that you can do there for example if I wanted to go and find Instagram posts that were related to some particular thing and you can check that they're not your friends and they don't have any not safe for work sort of messages so there's kind of a fairly complex set of rules that you can use to work through your Instagram feed and interact with those through Python right?
 
00:34:41 Tim Grossmann: Yeah exactly, we have a lot of distinct features already that kind of help you really make sure that you don't like or comment or follow people that you really don't want to follow and there's for example, this feature where you can just define a list of tags, a list of words that should not appear in the description of the post you want to like. For example if you're kind of right winged and there's a post that has some left winged comments or left winged tags, left winged descriptions in there, then you really don't want to follow them or interact with that post, you can make sure that the bot won't follow that one or it won't interact with that specific post. You can also as example I had one actor and he wanted to interact with the followers of one of his coactors because he knew that the people that follow his coactor most likely will also follow him so he wanted a feature where he can interact with the followers of his coworker and it worked out great, we developed it and he really liked the feature.
 
00:35:48 Michael Kennedy: That sounds like a really good idea for basically anyone who has some competition or collaboration type of person. Let's say I'm general motors and I want to capture some of the people from Porsche, who like Porsche, I can just go and follow everyone who likes Porsche or Mercedes or whatever and there's a good chance those people are into cars and they might follow me back. I could show some Corvette thing to them or something, who knows right?
 
00:36:18 Tim Grossmann: Yeah I wasn't aware of that kind of tactic until that guy pointed it out, but in the end or in the later run, I really realized that it's kind of core features that a lot of people really use right now because it's just really powerful.
 
00:36:34 Michael Kennedy: Yeah that's a great idea, my mind's going on things I can do right now. But with this, you can even make it automatic. Like I said at the beginning, I think it's important not to just follow somebody, I don't think that really is a strong signal that that person wants to interact with you, or that account cares about you but having some kind of interaction, so in addition to say following, you can like somebody's post, you can actually comment on their post and things like that. It even kind of randomizes it doesn't it.
 
00:37:03 Tim Grossmann: Yeah exactly, for example if you found the users you want to follow from that other guy's account, you can also set a bot to make sure that the bot goes to the account of that person and then it for example interacts with five random posts he posted in the last several weeks and then for example you say that on two of these posts you actually want to comment something and you want to follow the account as well or you want to like even more posts.
 
00:37:32 Michael Kennedy: That's pretty interesting. It's really fun to just dream about automating social media interactions at that level right?
 
00:37:41 Tim Grossmann: Yeah and it's really interesting for a lot of people because it's this toolbox, it's this modular toolbox, you kind of can imagine it like Lego pieces. You can just stack together however you want to so it really fits your needs and maybe it's only your needs and then you can really fit it to your specific use case.
 
00:38:05 Michael Kennedy: Yeah I did a lookback in the year last New Year's on the data science world with Jonathan Morgan from Partially Derivative and one of the things that came out of there and this makes a lot of sense after looking back on it these days is there were on Twitter, there were so many bots and when it got to the political debates and conversations, it was some insane number like many percent of the characters on Twitter interacting on these political debates were bots, on both sides and what would happen is periodically one bot would get into an argument with another one.
 
00:38:45 Tim Grossmann: Nice.
 
00:38:46 Michael Kennedy: Yeah so a left wing bot would fight with a right wing bot and it's like just stop, that's pretty wild. I guess maybe one of the things that's worth covering now is what are the limitations, when does it make sense to use InstaPy, when should you not, what are the drawbacks of it?
 
00:39:09 Tim Grossmann: A few of the drawbacks are that if you're really active yourself on Instagram for example, then the bot probably might not make any sense because you only have a predefined number of interactions you can do per day and this is limited by Instagram of course because if they detect some malicious interaction, they will make sure that they block these features and since they have this really nice microservice architecture, they can just block you from liking. For example if you go overboard with liking a lot of pictures, they will make sure that you're not able to like any pictures for the next 24 hours. It's the same with commenting and following, so they're really defining in what they turn off on your account, that's pretty interesting.
 
00:39:51 Michael Kennedy: That is really interesting that they're very fine grained rather than just you've been too busy, go away.
 
00:39:56 Tim Grossmann: Yeah exactly, it's pretty nice. And maybe another drawback of InstaPy itself is that even though it's kind of automated as it is right now, you still have to make sure that you take a look at it every now and then and that you don't let it carry away because in some cases, there can be problems with commenting as well if you did not define everything as close as possible, for example a while ago I had a guy that accidentally commented on a post of someone that had an illness which was pretty serious and of course he only set up the basic comments like awesome, super cool and wow this is so nice, and so one of his bot just commented, wow this is super nice on the bottom of this post.
 
00:40:49 Michael Kennedy: That's so terrible.
 
00:40:50 Tim Grossmann: Yeah and it's so wrong on many levels.
 
00:40:53 Michael Kennedy: Yeah you got to be really careful about that kind of stuff.
 
00:40:55 Tim Grossmann: It's still just a script, there's no AI behind it, it's not intelligent, it's not smart, it just does whatever you tell it to do.
 
00:41:04 Michael Kennedy: It probably could have an AI behind it though right? That could be a feature that somebody plugs in, some kind of machine learning NLTK type thing and tries to do sentiment analysis and tries to make a meaningful statement.
 
00:41:18 Tim Grossmann: Yeah that's a totally valid point here and we have some, in later on we implemented some image analysis with the Clarify API and these guys are really good at making sense of pictures so we use it to take the post's picture and let it run through the API and if we get some special type of tags back for example not safe for work or anything, then we just make sure that you won't comment it. You can totally predefine it for yourself, so for example you say I don't want to like any pictures of pizza and then you just say, yeah sure, whenever the API detects there is pizza in the picture, don't like that picture.
 
00:41:59 Michael Kennedy: Yeah we're a taco shop, we don't want pizza. Only tacos and burritos come on man, that's what we like. That's pretty interesting, how long does it take for that API to run, given a picture, how quickly do you get an answer back.
 
00:42:11 Tim Grossmann: That's a good question but it's super fast. If you do it at query for example in your terminal because I just have this super simple API, then it probably just a second or so until you get the response back, but that's not a point with InstaPy because InstaPy in general more works like a slow tool because if you go to fast, Instagram like I said will block you off and so we have this predefined wait times in there that for example delays a second or for like three seconds so this API call isn't really a problem here. If it takes a little bit more time, nobody cares because it's just kind of a random factor that will make your bot a little bit less likely to be detected.
 
00:42:55 Michael Kennedy: Let's see, what advice would you give to companies that are thinking of doing this kind of stuff? Has it worked out well for people or are they, I feel like it's still the best thing probably to have true natural interactions but maybe some combination?
 
00:43:13 Tim Grossmann: Yeah exactly it's super important that you don't only, especially if you're a little business or a small shop, it's super important that you don't just set it up and let it go wild out there because you will maybe even fend off your customers, actual customers but it's really interesting to search for new customers or interact with people that might be interested in your shop and your product and your food for example and we have a feature that is called like by location so you can actually set your own location as a center point and do some area around it so you will only interact with people that have posted something close to you so you know that these people are either in the area or that the people were in this area and might come back.
 
00:44:00 Michael Kennedy: Wow, that sounds really valuable, that's awesome. What do you think about the ethical side of these things? This can let businesses have richer interactions with their customers but it also, I could see how it could be abused.
 
00:44:13 Tim Grossmann: It's always a very hard decision to make and very hard decisions to make in the long run because there's so many things that can be abused and so many things that can be used to not only help your business but also destroy your business even though you're not aware of it because of course there's not always someone that takes care of the bot itself and checks every comment twice before it gets posted, but if you see it in the other way, there are a lot of profiles out there and a lot of people out there that are these influencers and these people often are just people that have a lot of money, they sometimes don't even have good content. There's different between people that have good content and are famous and people that have good content and are not famous on Instagram. It's really just a small small gap because maybe the people that are famous had more followers in the beginning or they started earlier, so what I think InstaPy is really good for and what InstaPy really does good is that it kind of makes people equal. Let's say it makes people equal on a social level. For example if you have good content, then it does not matter if you have a lot of money so you can buy yourself 10,000 followers on Instagram or 10,000 likes per picture. It doesn't make any difference because if you use the bot for free and you have a lot of bad pictures or you use the bot for free and you have good pictures, of course the person with the good pictures and the nice content will be preferred by the people he interacts them with for himself and it's kind of the difference because we take that money aspect that kind of in my opinion destroys this whole system, we take that out of the loop and make sure that people can become influencers even though they don't invest that much time and money into growing their social accounts.
 
00:46:15 Michael Kennedy: That's an interesting way to look at it, just because somebody is a celebrity doesn't mean that they necessarily have better content.
 
00:46:23 Tim Grossmann: Absolutely yeah.
 
00:46:24 Michael Kennedy: But they definitely have a head start on attracting people. Let's talk a little on the community around InstaPy a little bit, it's actually really popular, you have almost 3000 stars on GitHub, 700 forks, 72 contributors, this has become quite the project.
 
00:46:41 Tim Grossmann: And I'm so glad that it grew so big and that so many people are interested in it because like we talked about it in the beginning, this kind of adjustments to the XPaths for example are really time consuming and are a little bit annoying but if they are a lot of people working on it like they do right now, which is just awesome, it gets a lot easier and everyone has fewer work and they really help not only grow the tool itself but also just make sure that people are able to use it, still use it and are glad about it. There is this one guy he's called Joao, and he's @converge on GitHub and I'm super glad that this guy is so involved in the project because he helped me out so many times, especially since I'm now working full time and it's pretty hard to do a lot of open source work in my free time right now, so he's always there he's probably way smarter than I am and he's just super active and helps out and there are a lot of people like him and it's so interesting and so nice to see a community building around this tool that not only uses the tool but really it's self contained already so if I don't do any interaction anymore, the tool won't die. It's just the people help each other, the people communicate with each other, they even built a Slack channel without me being really involved and they kind of are totally active there, it's close to 150 people that are on this Slack channel and it's just so amazing to see and to hear about all these progress people make with InstaPy and all these emails I get about how they use InstaPy and that they thank me for building it even though I kind of built the initial tool and I built this idea of pushing it open source to make everyone able to access it, but in the end it turns out that the community is way better in improving that script and improving the publicity of it and just really I'm so thankful for that community because it makes the tool way more attractive and it keeps me in the project myself because sometimes I've thought about quitting, especially after I got some less nice emails from people, there was one guy from South Africa, he's doing social automation as a way to finance his master's degree and he wrote me that I should take down the project because it keeps him from getting more customers or from getting more clients that pay him to do their automation with which he pays his bachelors degree with, so I kind of had some points where I thought about maybe I should stop supporting that project, but this community really speaks for itself.
 
00:49:29 Michael Kennedy: It's definitely got a life of its own. There's 711 copies on different repos already so that's pretty cool and I'm looking at the GitHub repository right now and converge is the last commit two days ago so he's definitely very active, that's pretty awesome.
 
00:49:43 Tim Grossmann: Absolutely, I really love this guy.
 
00:49:46 Michael Kennedy: That's awesome, shout out to him. Very cool, one of the things I like to ask people who have projects like this is, I know a lot of my listeners are wanting to get into open source and they want to contribute but it's really easy to go I want to contribute to requests, I want to contribute to Django or whatever and these are such finely polished, highly used, not physically large but large in complexity and dependencies types of applications that it's really hard for someone trying to get into it to go yeah, I'm going to add a major revision to Django in some way, you've got to live and breathe that stuff. This seems like, there's 162 issues, it seems like there's a lot of room for other people to come in and play around with this. What do you think, could other people come get involved?
 
00:50:34 Tim Grossmann: There are so many interesting stories and so many nice stories about people that write me emails because they started getting into Python because of the project, they saw this one issue and these issues are not big problems or not big improvements, but they are small things that went wrong, that were developed wrong or that had some kind of bug in it, so people start digging into the code and thinking about how they could solve it and then they forked the project, they play around with it on their local machines and at some point, they of course find the problem, because all of these problems are not that big of problems, you don't need to write a ton of tests for it, you don't need to really write a ton of code for it, and it's super easy to contribute and that's probably one of the reasons why there are already so many contributors because it's fun, it's easy and you can help a lot of people. There will be a ton of people that are thankful for you fixing that bug in that tool. It's just great.
 
00:51:33 Michael Kennedy: Yeah that's really really cool, it does seem like a project that's the right size for getting involved in open source. It's not massive but it's also not a toy project, it's fairly approachable.
 
00:51:44 Tim Grossmann: Absolutely yeah, it's one of these medium sized projects that got some attention but not too much to be really heavily developed by a core team but it's all open source and it's all contributors.
 
00:51:57 Michael Kennedy: Excellent, another thing that you talked about when you were at Euro Python that I thought was pretty powerful was the effect that working on open source has had on your career, at least on the software side, I don't know about the arts side. Maybe speak to that a little bit and share your story there.
 
00:52:15 Tim Grossmann: Sorry, in terms of art or?
 
00:52:17 Michael Kennedy: No, no just you said, you laid out a couple of things that changed because you contributed to open source, so you got requests for internships, job offers, all sorts of cool stuff that happened by just creating this project for example.
 
00:52:33 Tim Grossmann: This got really crazy. In the beginning it were just people asking me to join their teams and to interview with them and when I started putting a note on the bottom of my article about InstaPy, people really contacted me since I wanted an internship, don't you want to come over to Iceland, don't you want to come over to Australia, to Japan, to Brazil, to the United States, it was just completely all over the world, people from all over the world wrote me in mails that I would be interested in having me in their team and it's just so crazy and I got the talk at Euro Python because of that project. I now got another talk at Dev Fest in Mountain View about that kind of topics and wow, I'm sitting here right now and talking to you.
 
00:53:25 Michael Kennedy: That's right, it's pretty amazing. I think you are in just such a different position when people come to you and they're like, we want to work with you and here's what we can do to make that amazing, as opposed to you writing, going to the contact us form on 100 random companies and say I promise I'm good, I want to come work with you. It's not even the same type of thing.
 
00:53:49 Tim Grossmann: Yeah and if they see that you have a good GitHub profile, of course recruiters and any type of people that search for other people that have some experience, of course they will look at your GitHub profile, because it's just kind of the social profile of a developer.
 
00:54:04 Michael Kennedy: It really is and one of the things that I think is interesting about GitHub is it's super hard to fake your commit timelines, like if you've got five repositories but they all appeared 10 days ago, it's like well maybe they just put that here for this interview or because they now want a job but if it's been there for two years and there's lots of green bars on the little commit, I don't know what you call that, streak or whatever they have at the bottom that's definitely a very strong signal so I think that's cool.
 
00:54:37 Tim Grossmann: Absolutely, yeah it's just crazy what a nice presence, what a nice open presence as a developer can give you and how much value is in this kind of portfolio, it's just crazy.
 
00:54:51 Michael Kennedy: Yeah I was talking a while ago with someone, I can't remember which episode, but if you start your own project that's one thing, but if you contribute to other people's projects, at a lot of these Python meetups, there's the sprints that are after. So if you go and contribute to InstaPy, maybe there's an InstaPy sprint and you can work with some of the other developers there or you contribute to Flask, you can go work with the core developers of Flask and that can really create connections that are quite valuable in the developer space that you wouldn't just get normally. You can sit down with the core team and actually work on some product, so next time you're in an interview and they're like oh, I see you've talked about Flask and so why would you do this, well here, when we wrote it internally this is what it did and that's why you do it, it's like okay you're hired. That's a really interesting and not super hard thing to do. If you go to these sprints and sit down, you can sit with a really experienced person and level up that way.
 
00:55:50 Tim Grossmann: This is also one thing I love about open source is that if you want to contribute, you have to dig into their code, you have to understand their architecture, you have to understand how they write their code, their style guides and their relations between classes for example and this will just make you so much better developer, it's insane.
 
00:56:10 Michael Kennedy: It's really wonderful, you can really absorb a lot of that years of experience, especially if you're new. All right, well Tim I think we're just about out of time, we have to leave it there for InstaPy, but it sounds like a fun project and also one people can get involved with. Before you go though, I have two questions for you, the two questions, first of all, if you're working on InstaPy, what editor do you open up?
 
00:56:33 Tim Grossmann: If I work on InstaPy, it's definitely PyJar and if I get into some more data science-y stuff, and create some metrics and this kind of, get some insights into InstaPy, then I will use Spyder.
 
00:56:46 Michael Kennedy: Okay yeah those are really cool. People haven't mentioned Spyder very much, but it comes with the Anaconda distribution and it's kind of the data science equivalent of PyCharm I guess, maybe is the way to think of it.
 
00:56:56 Tim Grossmann: That's probably why it's two editors but they're kind of the same.
 
00:56:59 Michael Kennedy: They're kind of parallel but different. All right and notable PyPI package, I'll go ahead and throw out pip install instapy for you, what other one?
 
00:57:08 Tim Grossmann: Sadly InstaPy isn't on PyPI.
 
00:57:11 Michael Kennedy: Oh is it not?
 
00:57:12 Tim Grossmann: No it's not, right now it's not because we have some, or we didn't investigate too much into it in terms of we have to use this Chrome driver right now and this Chrome driver has to be added later on because it's depending on the system so we have to, we're not yet ready to push it on PyPI but it's one of the next things we will definitely do and then of course it will be pip install instapy.
 
00:57:36 Michael Kennedy: I actually was thinking about, that's got to be a pretty massive download to take the different platforms of Chrome with it and stuff like that right so okay cool, so other notable PyPI packages?
 
00:57:47 Tim Grossmann: Of course Selenium, because I just really like it and it's so handy and I'll go with Requests because right now we are switching over or we try to switch over to Requests for some of the data gathering because we lately have been kind of reverse engineering the Instagram Graff QL API and they have some really neat endpoints there that you can leverage to get all the information without doing a lot of work and so we are going for Requests, we're using Requests as well now.
 
00:58:19 Michael Kennedy: Yeah nice combination, it's interesting that you have the two there, cool all right. Final call to action, people are interested in InstaPy, what do they do, how do they get started?
 
00:58:28 Tim Grossmann: First of all, just go to GitHub and search for InstaPy, you will definitely find it, it's the biggest Instagram bot on GitHub right now, there are several others but none of them is as popular as InstaPy. Just go there, check it out, fork it, clone it, try it out and if you you're interested, if you have some ideas, just post it as an issue or get into it yourself and just check out the issues, check what problems people have and try to fix them, it's super easy and you will be one of the core contributors of InstaPy which is also nice.
 
00:59:04 Michael Kennedy: Yeah that's really awesome. Thanks so much for being on the show and sharing your project with us, that was very interesting.
 
00:59:11 Tim Grossmann: Yeah thanks for being here, it was really amazing.
 
00:59:14 Michael Kennedy: Yeah you bet.
 
00:59:15 Tim Grossmann: Thank you.
 
00:59:16 Michael Kennedy: Bye. This has been another episode of Talk Python To Me. Today's guest has been Tim Grossman and this episode has been brought to you by Linode and GoCD, Linode is bulletproof hosting for whatever you're building with Python. Get your four months free at talkpython.fm/linode. Just use the code Python17. GoCD is the on premise open source continuous delivery server. Want to improve your deployment workflow but keep your code and builds in house? Check out GoCD at talkpython.fm/GOCD and take control over your process. Are you or a colleague trying to learn Python? Have you tried books and videos that just left you bored by covering topics point by point? Well check out my online course, Python Jumpstart by Building 10 apps at talkpython.fm/course to experience a more engaging way to learn Python and if you're looking for something a little more advanced, try my Write Pythonic Code Course at talkpython.fm/pythonic. Be sure to subscribe to the show. Open your favorite podcatcher and search for Python. We should be right at the top. You can also find the iTunes feed at /itunes, Google Play feed at /play and direct RSS feed at /rss on talkpython.fm. This is your host, Michael Kennedy. Thanks so much for listening, I really appreciate it. Now get out there and write some Python code.
 
